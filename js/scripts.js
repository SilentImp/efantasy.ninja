"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();!function(){var n=function(){function n(){_classCallCheck(this,n);var e=new Promise(function(n,e){return"loading"!=document.readyState?n():void document.addEventListener("DOMContentLoaded",function(){return n()})});e.then(this.init.bind(this))}return _createClass(n,[{key:"init",value:function(){this.dirthday=new Pikaday({field:document.querySelector(".account__input_date"),format:"YYYY-MM-DD"})}}]),n}();new n}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this;if(this.widget=document.querySelector(".edit"),null!=this.widget){var t=this.widget.querySelectorAll(".button_add"),a=this.widget.querySelectorAll(".button_remove");this.players=this.widget.querySelector(".edit__available-players"),this.team=this.widget.querySelector(".edit__players"),this.form=this.widget.querySelector("form.edit__teamer"),this.popup=this.widget.querySelector(".edit__popup"),this.popup_close=this.popup.querySelector(".edit__popup-close"),[].forEach.call(t,function(t){t.addEventListener("click",e.addPlayer.bind(e))}),[].forEach.call(a,function(t){t.addEventListener("click",e.removePlayer.bind(e))}),this.popup_close.addEventListener("click",this.closePopup.bind(this)),this.form.addEventListener("submit",this.checkTeam.bind(this))}}},{key:"closePopup",value:function(e){this.popup.style.display="none"}},{key:"checkTeam",value:function(e){var t=e.currentTarget.querySelectorAll(".teamer");return t.length<8?(this.popup.style.display="block",void e.preventDefault()):void 0}},{key:"removePlayer",value:function(e){var t=e.currentTarget.closest(".teamer"),a=parseInt(t.getAttribute("data-id"),10),r=document.createElement("li");r.classList.add("edit__player"),t.parentNode.parentNode.removeChild(t.parentNode),this.players.querySelector('[data-id="'+a+'"]').classList.remove("edit__available_added"),this.team.appendChild(r)}},{key:"addPlayer",value:function(e){var t=e.currentTarget.closest("tr");if(!t.classList.contains("edit__available_added")){var a=this.team.querySelectorAll(".teamer"),r=void 0;if(0==a.length)r=this.team.querySelector(".edit__player");else if(r=a[a.length-1].parentNode.nextElementSibling,null==r)return;var i=t.querySelector(".edit__available-name").textContent,n=t.querySelector(".edit__available-players-salary").textContent,l=t.querySelector(".edit__available-avatar").getAttribute("src"),d=t.getAttribute("data-id"),s=this.createPlayer(d,l,i,n);r.appendChild(s),t.classList.add("edit__available_added")}}},{key:"createPlayer",value:function(e,t,a,r){var i=document.createElement("DIV"),n=document.createElement("P"),l=document.createElement("P"),d=document.createElement("BUTTON"),s=document.createElement("INPUT"),c=document.createElement("IMG");return i.setAttribute("data-id",e),i.classList.add("teamer"),n.classList.add("teamer__name"),n.appendChild(document.createTextNode(a)),l.classList.add("teamer__salary"),l.appendChild(document.createTextNode(r)),c.classList.add("teamer__avatar"),c.setAttribute("alt","Avatar"),c.setAttribute("src",t),s.setAttribute("type","hidden"),s.setAttribute("name","team[]"),s.setAttribute("value",e),d.classList.add("button"),d.classList.add("button_remove"),d.classList.add("teamer__remove"),d.setAttribute("type","button"),d.appendChild(document.createTextNode("-")),d.addEventListener("click",this.removePlayer.bind(this)),i.appendChild(c),i.appendChild(n),i.appendChild(l),i.appendChild(d),i.appendChild(s),i}}]),e}();new e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();!function(){var t=function(){function t(){_classCallCheck(this,t);var e=new Promise(function(t,e){return"loading"!=document.readyState?t():void document.addEventListener("DOMContentLoaded",function(){return t()})});e.then(this.init.bind(this))}return _createClass(t,[{key:"init",value:function(){var t=this;if(this.filter=document.querySelector(".filter"),null!=this.filter){this.container=document.querySelector("[data-container="+this.filter.getAttribute("data-target")+"]");var e=this.filter.querySelectorAll("input[data-filter]");[].forEach.call(e,function(e){e.addEventListener("change",t.filterFields.bind(t))})}}},{key:"filterFields",value:function(t){var e=t.currentTarget,n=e.getAttribute("data-filter");"all"==n?[].forEach.call(this.container.querySelectorAll("[data-tag]"),function(t){t.classList.toggle("hidden",!1)}):[].forEach.call(this.container.querySelectorAll("[data-tag]"),function(t){t.getAttribute("data-tag").toLowerCase()==n.toLowerCase()?t.classList.toggle("hidden",!1):t.classList.toggle("hidden",!0)})}}]),t}();new t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){if(this.menu=document.querySelector(".navigation"),null!=this.menu){this.open=!1,this.wrapper=this.menu.querySelector(".navigation__wrapper");var e=this.menu.querySelector(".navigation__toggle");e.addEventListener("click",this.toggleMenu.bind(this)),window.addEventListener("resize",this.resized.bind(this))}}},{key:"resized",value:function(){Modernizr.mq("(min-width: 1000px)")&&this.open&&(this.open=!1,this.wrapper.removeAttribute("style"),this.menu.classList.toggle("navigation_open",!1))}},{key:"toggleMenu",value:function(){this.open=!this.open,Velocity(this.wrapper,"stop"),this.menu.classList.toggle("navigation_open"),this.open?Velocity(this.wrapper,{translateY:this.wrapper.offsetHeight+this.menu.offsetHeight},{duration:250}):Velocity(this.wrapper,{translateY:0},{duration:250})}}]),e}();new e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();!function(){var t=function(){function t(){_classCallCheck(this,t);var e=new Promise(function(t,e){return"loading"!=document.readyState?t():void document.addEventListener("DOMContentLoaded",function(){return t()})});e.then(this.init.bind(this))}return _createClass(t,[{key:"init",value:function(){var t=this;if(this.popup=document.querySelector(".popup"),null!=this.popup){this.lightbox=document.querySelector(".popup__lightbox");var e=document.querySelector(".popup__close"),o=document.querySelectorAll(".popup__button"),n=document.querySelectorAll('[data-action="open popup"]');this.current_button=document.querySelector(".popup__button_current"),this.current_tab=document.querySelector(".popup__tab_current"),e.addEventListener("click",this.closePopup.bind(this)),this.lightbox.addEventListener("click",this.closePopup.bind(this)),[].forEach.call(o,function(e){e.addEventListener("click",t.openTab.bind(t))}),[].forEach.call(n,function(e){e.addEventListener("click",t.openPopup.bind(t))})}}},{key:"openTab",value:function(t){var e=t.currentTarget,o=e.getAttribute("data-target"),n=document.querySelector('[data-tab="'+o+'"]');this.current_button.classList.remove("popup__button_current"),this.current_tab.classList.remove("popup__tab_current"),e.classList.add("popup__button_current"),n.classList.add("popup__tab_current"),this.current_button=e,this.current_tab=n}},{key:"closePopup",value:function(){Velocity(this.lightbox,"stop"),Velocity(this.lightbox,"fadeOut",{duration:250}),Velocity(this.popup,"stop"),Velocity(this.popup,"fadeOut",{duration:250})}},{key:"openPopup",value:function(){Velocity(this.lightbox,"stop"),Velocity(this.lightbox,"fadeIn",{duration:250}),Velocity(this.popup,"stop"),Velocity(this.popup,"fadeIn",{duration:250})}}]),t}();window.popup=new t}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQvYWNjb3VudC5qcyIsImVkaXQvZWRpdC5qcyIsImZpbHRlci9maWx0ZXIuanMiLCJuYXZpZ2F0aW9uL25hdmlnYXRpb24uanMiLCJwb3B1cC9wb3B1cC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIkFjY291bnQiLCJ0aGlzIiwicmVhZHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImRvY3VtZW50IiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGVuIiwiaW5pdCIsImJpbmQiLCJ2YWx1ZSIsImRpcnRoZGF5IiwiUGlrYWRheSIsImZpZWxkIiwicXVlcnlTZWxlY3RvciIsImZvcm1hdCIsIkVkaXQiLCJfdGhpcyIsIndpZGdldCIsImFkZF9idXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZV9idXR0b25zIiwicGxheWVycyIsInRlYW0iLCJmb3JtIiwicG9wdXAiLCJwb3B1cF9jbG9zZSIsImZvckVhY2giLCJjYWxsIiwiYnV0dG9uIiwiYWRkUGxheWVyIiwicmVtb3ZlUGxheWVyIiwiY2xvc2VQb3B1cCIsImNoZWNrVGVhbSIsImV2ZW50Iiwic3R5bGUiLCJkaXNwbGF5IiwiY3VycmVudFRhcmdldCIsInByZXZlbnREZWZhdWx0IiwicGxheWVyIiwiY2xvc2VzdCIsImlkIiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmUiLCJhcHBlbmRDaGlsZCIsImNvbnRhaW5zIiwidGVhbWVycyIsImNvbnRhaW5lciIsInVuZGVmaW5lZCIsIm5leHRFbGVtZW50U2libGluZyIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsInNhbGFyeSIsInNyYyIsIm1lbWJlciIsImNyZWF0ZVBsYXllciIsInBfbmFtZSIsInBfc2FsYXJ5IiwiaW5wdXQiLCJpbWciLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVUZXh0Tm9kZSIsIkZpbHRlciIsImZpbHRlciIsImlucHV0cyIsImZpbHRlckZpZWxkcyIsInRhZyIsInRyIiwidG9nZ2xlIiwidG9Mb3dlckNhc2UiLCJOYXZpZ2F0aW9uIiwibWVudSIsIm9wZW4iLCJ3cmFwcGVyIiwidG9nZ2xlTWVudSIsIndpbmRvdyIsInJlc2l6ZWQiLCJNb2Rlcm5penIiLCJtcSIsInJlbW92ZUF0dHJpYnV0ZSIsIlZlbG9jaXR5IiwidHJhbnNsYXRlWSIsIm9mZnNldEhlaWdodCIsImR1cmF0aW9uIiwiUG9wdXAiLCJsaWdodGJveCIsImNsb3NlIiwibGlua3MiLCJvcGVuX2xpbmtzIiwiY3VycmVudF9idXR0b24iLCJjdXJyZW50X3RhYiIsImxpbmsiLCJvcGVuVGFiIiwib3BlblBvcHVwIiwidGFiIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlC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S2tFLEVBQU8sU0FBQ0ksR0FDcEJBLEVBQUs1RixpQkFBaUIsUUFBU1csRUFBS2tGLFFBQVExRixLQUFJUSxTQUVqRFUsUUFBUUMsS0FBS21FLEVBQVksU0FBQ0csR0FDekJBLEVBQUs1RixpQkFBaUIsUUFBU1csRUFBS21GLFVBQVUzRixLQUFJUSxVQXdCdER2QixJQUFLLFVBQ0xnQixNQWpCRyxTQUFDd0IsR0FDSixHQUFJTCxHQUFTSyxFQUFNRyxjQUNickQsRUFBUzZDLEVBQU9jLGFBQWEsZUFDN0IwRCxFQUFNakcsU0FBU1UsY0FBYyxjQUFnQjlCLEVBQVMsS0FFNURlLE1BQUtpRyxlQUFlbEQsVUFBVUksT0FBTyx5QkFDckNuRCxLQUFLa0csWUFBWW5ELFVBQVVJLE9BQU8sc0JBQ2xDckIsRUFBT2lCLFVBQVVDLElBQUkseUJBQ3JCc0QsRUFBSXZELFVBQVVDLElBQUksc0JBRWxCaEQsS0FBS2lHLGVBQWlCbkUsRUFDdEI5QixLQUFLa0csWUFBY0ksS0F3Qm5CM0csSUFBSyxhQUNMZ0IsTUFuQk0sV0FDTjZFLFNBQVN4RixLQUFLNkYsU0FBVSxRQUN4QkwsU0FBU3hGLEtBQUs2RixTQUFVLFdBQVlGLFNBQVUsTUFDOUNILFNBQVN4RixLQUFLMEIsTUFBTyxRQUNyQjhELFNBQVN4RixLQUFLMEIsTUFBTyxXQUFZaUUsU0FBVSxTQTBCM0NoRyxJQUFLLFlBQ0xnQixNQXJCSyxXQUNMNkUsU0FBU3hGLEtBQUs2RixTQUFVLFFBQ3hCTCxTQUFTeEYsS0FBSzZGLFNBQVUsVUFBV0YsU0FBVSxNQUM3Q0gsU0FBU3hGLEtBQUswQixNQUFPLFFBQ3JCOEQsU0FBU3hGLEtBQUswQixNQUFPLFVBQVdpRSxTQUFVLFVBN0U1Q0MsSUFrRk5ULFFBQU96RCxNQUFRLEdBQUlrRSIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbigpIHtcbiAgICBjbGFzcyBBY2NvdW50IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmRpcnRoZGF5ID0gbmV3IFBpa2FkYXkoe1xuICAgICAgICAgICAgICAgIGZpZWxkOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3VudF9faW5wdXRfZGF0ZScpXG4gICAgICAgICAgICAgICAgLCBmb3JtYXQ6ICdZWVlZLU1NLUREJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3IEFjY291bnQ7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbigpIHtcbiAgICBjbGFzcyBFZGl0IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLndpZGdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy53aWRnZXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhZGRfYnV0dG9ucyA9IHRoaXMud2lkZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXR0b25fYWRkJylcbiAgICAgICAgICAgICAgICAsIHJlbW92ZV9idXR0b25zID0gdGhpcy53aWRnZXQucXVlcnlTZWxlY3RvckFsbCgnLmJ1dHRvbl9yZW1vdmUnKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVycyA9IHRoaXMud2lkZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0X19hdmFpbGFibGUtcGxheWVycycpO1xuICAgICAgICAgICAgdGhpcy50ZWFtID0gdGhpcy53aWRnZXQucXVlcnlTZWxlY3RvcignLmVkaXRfX3BsYXllcnMnKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybSA9IHRoaXMud2lkZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0uZWRpdF9fdGVhbWVyJyk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwID0gdGhpcy53aWRnZXQucXVlcnlTZWxlY3RvcignLmVkaXRfX3BvcHVwJyk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwX2Nsb3NlID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZWRpdF9fcG9wdXAtY2xvc2UnKTtcbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChhZGRfYnV0dG9ucywgKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYWRkUGxheWVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwocmVtb3ZlX2J1dHRvbnMsIChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnJlbW92ZVBsYXllci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wb3B1cF9jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VQb3B1cC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLmNoZWNrVGVhbS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlUG9wdXAgKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoZWNrVGVhbSAoZXZlbnQpIHtcblxuICAgICAgICAgICAgbGV0IHBsYXllcnMgPSBldmVudC5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZWFtZXInKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJzLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZW1vdmVQbGF5ZXIgKGV2ZW50KSB7XG4gICAgICAgICAgICBsZXQgcGxheWVyID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGVhbWVyJylcbiAgICAgICAgICAgICAgICAsIGlkID0gcGFyc2VJbnQocGxheWVyLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpLCAxMClcbiAgICAgICAgICAgICAgICAsIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoJ2VkaXRfX3BsYXllcicpO1xuICAgICAgICAgICAgcGxheWVyLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwbGF5ZXIucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICB0aGlzLnBsYXllcnMucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgaWQgKyAnXCJdJykuY2xhc3NMaXN0LnJlbW92ZSgnZWRpdF9fYXZhaWxhYmxlX2FkZGVkJyk7XG4gICAgICAgICAgICB0aGlzLnRlYW0uYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkUGxheWVyIChldmVudCkge1xuICAgICAgICAgICAgbGV0IHBsYXllciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgndHInKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0X19hdmFpbGFibGVfYWRkZWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0ZWFtZXJzID0gdGhpcy50ZWFtLnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZWFtZXInKVxuICAgICAgICAgICAgICAgICwgY29udGFpbmVyO1xuICAgICAgICAgICAgaWYgKHRlYW1lcnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSB0aGlzLnRlYW0ucXVlcnlTZWxlY3RvcignLmVkaXRfX3BsYXllcicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSB0ZWFtZXJzW3RlYW1lcnMubGVuZ3RoLTFdLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5hbWUgPSBwbGF5ZXIucXVlcnlTZWxlY3RvcignLmVkaXRfX2F2YWlsYWJsZS1uYW1lJykudGV4dENvbnRlbnRcbiAgICAgICAgICAgICAgICAsIHNhbGFyeSA9IHBsYXllci5xdWVyeVNlbGVjdG9yKCcuZWRpdF9fYXZhaWxhYmxlLXBsYXllcnMtc2FsYXJ5JykudGV4dENvbnRlbnRcbiAgICAgICAgICAgICAgICAsIHNyYyA9IHBsYXllci5xdWVyeVNlbGVjdG9yKCcuZWRpdF9fYXZhaWxhYmxlLWF2YXRhcicpLmdldEF0dHJpYnV0ZSgnc3JjJylcbiAgICAgICAgICAgICAgICAsIGlkID0gcGxheWVyLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpXG4gICAgICAgICAgICAgICAgLCBtZW1iZXIgPSB0aGlzLmNyZWF0ZVBsYXllcihpZCwgc3JjLCBuYW1lLCBzYWxhcnkpO1xuXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWVtYmVyKTtcbiAgICAgICAgICAgIHBsYXllci5jbGFzc0xpc3QuYWRkKCdlZGl0X19hdmFpbGFibGVfYWRkZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNyZWF0ZVBsYXllciAoaWQsIHNyYywgbmFtZSwgc2FsYXJ5KSB7XG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJylcbiAgICAgICAgICAgICAgICAsIHBfbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1AnKVxuICAgICAgICAgICAgICAgICwgcF9zYWxhcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdQJylcbiAgICAgICAgICAgICAgICAsIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0JVVFRPTicpXG4gICAgICAgICAgICAgICAgLCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0lOUFVUJylcbiAgICAgICAgICAgICAgICAsIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0lNRycpO1xuICAgICAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGlkKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0ZWFtZXInKTtcbiAgICAgICAgICAgIHBfbmFtZS5jbGFzc0xpc3QuYWRkKCd0ZWFtZXJfX25hbWUnKTtcbiAgICAgICAgICAgIHBfbmFtZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuYW1lKSk7XG4gICAgICAgICAgICBwX3NhbGFyeS5jbGFzc0xpc3QuYWRkKCd0ZWFtZXJfX3NhbGFyeScpO1xuICAgICAgICAgICAgcF9zYWxhcnkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc2FsYXJ5KSk7XG4gICAgICAgICAgICBpbWcuY2xhc3NMaXN0LmFkZCgndGVhbWVyX19hdmF0YXInKTtcbiAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdBdmF0YXInKVxuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKVxuICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RlYW1bXScpO1xuICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd2YWx1ZScsIGlkKTtcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b24nKTtcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b25fcmVtb3ZlJyk7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgndGVhbWVyX19yZW1vdmUnKTtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCdidXR0b24nKTtcbiAgICAgICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnLScpKTtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucmVtb3ZlUGxheWVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocF9uYW1lKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwX3NhbGFyeSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5ldyBFZGl0O1xufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgY2xhc3MgRmlsdGVyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXInKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29udGFpbmVyPVwiICsgdGhpcy5maWx0ZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpICsgXCJdXCIpO1xuICAgICAgICAgICAgbGV0IGlucHV0cyA9IHRoaXMuZmlsdGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W2RhdGEtZmlsdGVyXScpO1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGlucHV0cywgKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5maWx0ZXJGaWVsZHMuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbHRlckZpZWxkcyAoZXZlbnQpIHtcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAgICAgICAsIHRhZyA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXInKTtcblxuICAgICAgICAgICAgaWYgKHRhZyA9PSAnYWxsJykge1xuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWddJyksICh0cikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10YWddJyksICh0cikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZih0ci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFnJykudG9Mb3dlckNhc2UoKSA9PSB0YWcudG9Mb3dlckNhc2UoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5ldyBGaWx0ZXI7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBOYXZpZ2F0aW9uIGNsYXNzXG4gICAgICogQGNsYXNzXG4gICAgICovXG4gICAgY2xhc3MgTmF2aWdhdGlvbiB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLm1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbicpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWVudSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIgPSB0aGlzLm1lbnUucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb25fX3dyYXBwZXInKTtcbiAgICAgICAgICAgIGxldCB0b2dnbGUgPSB0aGlzLm1lbnUucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb25fX3RvZ2dsZScpO1xuICAgICAgICAgICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b2dnbGVNZW51LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gUmVzaXplIHdpbmRvd1xuICAgICAgICAgKi9cbiAgICAgICAgcmVzaXplZCgpIHtcbiAgICAgICAgICAgIGlmICggTW9kZXJuaXpyLm1xKCcobWluLXdpZHRoOiAxMDAwcHgpJykgJiYgdGhpcy5vcGVuICkge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51LmNsYXNzTGlzdC50b2dnbGUoXCJuYXZpZ2F0aW9uX29wZW5cIiwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHRhYlxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQgRXZlbnQge0V2ZW50fSB0byBnZXQgYnV0dG9uIHVzZXIgaGF2ZSBjbGlja2VkXG4gICAgICAgICAqL1xuICAgICAgICB0b2dnbGVNZW51KCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuID0gIXRoaXMub3BlbjtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMud3JhcHBlciwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgdGhpcy5tZW51LmNsYXNzTGlzdC50b2dnbGUoXCJuYXZpZ2F0aW9uX29wZW5cIik7XG4gICAgICAgICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgICAgICAgICAgVmVsb2NpdHkodGhpcy53cmFwcGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVk6IHRoaXMud3JhcHBlci5vZmZzZXRIZWlnaHQgKyB0aGlzLm1lbnUub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiAyNTB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgVmVsb2NpdHkodGhpcy53cmFwcGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVk6IDBcbiAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDI1MH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV3IE5hdmlnYXRpb247XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBQb3B1cCBjbGFzc1xuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIGNsYXNzIFBvcHVwIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFN0YXJ0IGluaXRpYWxpemF0aW9uIG9uIGRvbWxvYWRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIGxldCByZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiByZXNvbHZlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWFkeS50aGVuKHRoaXMuaW5pdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQWRkaW5nIGV2ZW50cyBhbmQgcHJvcGVydGllc1xuICAgICAgICAgKi9cbiAgICAgICAgaW5pdCgpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubGlnaHRib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2xpZ2h0Ym94Jyk7XG5cbiAgICAgICAgICAgIGxldCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKVxuICAgICAgICAgICAgICAgICwgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2J1dHRvbicpXG4gICAgICAgICAgICAgICAgLCBvcGVuX2xpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWN0aW9uPVwib3BlbiBwb3B1cFwiXScpXG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudF9idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbl9jdXJyZW50Jyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRfdGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX190YWJfY3VycmVudCcpO1xuXG4gICAgICAgICAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VQb3B1cC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMubGlnaHRib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlUG9wdXAuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobGlua3MsIChsaW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblRhYi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKG9wZW5fbGlua3MsIChsaW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblBvcHVwLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gdGFiXG4gICAgICAgICAqIEBwYXJhbSBldmVudCBFdmVudCB7RXZlbnR9IHRvIGdldCBidXR0b24gdXNlciBoYXZlIGNsaWNrZWRcbiAgICAgICAgICovXG4gICAgICAgIG9wZW5UYWIoZXZlbnQpIHtcbiAgICAgICAgICAgIGxldCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgICAgICAgLCB0YXJnZXQgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpXG4gICAgICAgICAgICAgICAgLCB0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWI9XCInICsgdGFyZ2V0ICsgJ1wiXScpO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRfYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX19idXR0b25fY3VycmVudCcpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50X3RhYi5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9fdGFiX2N1cnJlbnQnKTtcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwb3B1cF9fYnV0dG9uX2N1cnJlbnQnKTtcbiAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdwb3B1cF9fdGFiX2N1cnJlbnQnKTtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50X2J1dHRvbiA9IGJ1dHRvbjtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudF90YWIgPSB0YWI7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIENsb3NlIHBvcHVwIGFuZCBsaWdodGJveFxuICAgICAgICAgKi9cbiAgICAgICAgY2xvc2VQb3B1cCgpIHtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubGlnaHRib3gsIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubGlnaHRib3gsIFwiZmFkZU91dFwiLCB7ZHVyYXRpb246IDI1MH0pO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwgXCJmYWRlT3V0XCIsIHtkdXJhdGlvbjogMjUwfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIENsb3NlIHBvcHVwIGFuZCBsaWdodGJveFxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblBvcHVwKCkge1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgXCJmYWRlSW5cIiwge2R1cmF0aW9uOiAyNTB9KTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIFwiZmFkZUluXCIsIHtkdXJhdGlvbjogMjUwfSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHdpbmRvdy5wb3B1cCA9IG5ldyBQb3B1cDtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=